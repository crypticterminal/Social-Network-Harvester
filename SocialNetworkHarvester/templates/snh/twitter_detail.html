{% extends "snh/snh_base.html" %}
{% block extrahead %}
<script type="text/javascript" charset="utf-8">
	$(document).ready(function() {
		$('#status_table').dataTable(
            {
                "iDisplayLength": 50, 
                "sPaginationType": "full_numbers",
                "sDom": '<"clear">lfrtip',
                "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
                    $('td:eq(1)', nRow).html( '<a href="/tw_user_detail/'+aData[1]+'">'+aData[1]+'</a>' );
                },
            });
		$('#search_table').dataTable(
            {
                "iDisplayLength": 100, 
                "sPaginationType": "full_numbers",
                "sDom": '<"clear">lfrtip',
                "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
                    $('td:eq(0)', nRow).html( '<a href="/tw_search_detail/'+aData[0]+'">'+aData[0]+'</a>' );
                },
            });
	} );
</script>
{% endblock %}
{% block submenu %}
<table class="tableheader">
    <tr>
        <td {% if harvester_id == "0" %}class="submenu-selection"{% endif %}><a href="/tw/0">All harvesters</a></td>
        {% for h in all_harvesters %}
        <td  {% ifequal harvester_id h.pmk_id|slugify %}class="submenu-selection"{% endifequal %}><a href="/tw/{{ h.pmk_id }}">{{ h }}</a></td>
        {% endfor %}
    </tr>
</table>
{% endblock %}

{% block content %}
<h3>{{ user.name }} </h3>
<table id="user_table" class="pretty">
    <thead>
    <tr class="head">
        <th>Name</th>
        <th>Screen Name</th>
        <th>Description</th>
        <th>Followers count</th>
        <th>Friends count</th>
        <th>Statuses count</th>
        <th>Listed count</th>
        <th>URL</th>
        <th>Location</th>
        <th>Time zone</th>
        <th>UTC offset</th>
        <th>Protected</th>
        <th>Language</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>{{ user.name }}</td>
        <td><a href="/tw_user_detail/{{ user.screen_name }}">{{ user.screen_name }}</a></td>
        <td>{{ user.description }}</td>
        <td>{{ user.followers_count }}</td>
        <td>{{ user.friends_count }}</td>
        <td>{{ user.statuses_count }}</td>
        <td>{{ user.listed_count }}</td>
        <td></td>
        <td>{{ user.location }}</td>
        <td>{{ user.time_zone }}</td>
        <td>{{ user.utc_offset }}</td>
        <td>{{ user.protected }}</td>
        <td>{{ user.lang }}</td>
    </tr>
    </tbody>

</table>
<h3>Statuses</h3>
<table id="status_table" class="pretty">
    <thead>
    <tr class="head">
        <th>Created at</th>
        <th>text</th>
        <th>Retweet count</th>
        <th>Retweeted</th>
        <th>source</th>
        <th>truncated</th>
        </tr>
    </thead>
    <tbody>
{% for status in statuses %}
    <tr onclick="document.location.href='/twitter_status/{{ status.fid }}/'" >
        <td id="date">{{ status.created_at.ctime }}</td>
        <td >{{ status.text|urlize }}</td>
        <td class="center">{{ status.retweet_count }}</td>
        <td class="center">{{ status.retweeted }}</td>
        <td>{{ status.source|safe }}</td>
        <td>{{ status.truncated }}</td>
    </tr>
{% endfor %}
    <tbody>
</table>

<h3>Search results for @{{ user.screen_name }} </h3>
<table id="search_table" class="pretty">
    <thead>
    <tr class="head">
        <th>Created at</th>
        <th>From</th>
        <th>text</th>
        <th>Retweet count</th>
        <th>Retweeted</th>
        <th>source</th>
        <th>truncated</th>
        </tr>
    </thead>
    <tbody>
{% for status in searches %}
    <tr onclick="document.location.href='/twitter_status/{{ status.fid }}/'" >
        <td id="date">{{ status.created_at.ctime }}</td>
        <td >{{ status.user.screen_name }}</td>
        <td >{{ status.text|urlize }}</td>
        <td class="center">{{ status.retweet_count }}</td>
        <td class="center">{{ status.retweeted }}</td>
        <td>{{ status.source|safe }}</td>
        <td>{{ status.truncated }}</td>
    </tr>
{% endfor %}
    <tbody>
</table>

{% endblock %}
