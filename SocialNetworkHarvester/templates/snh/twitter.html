{% extends "snh/snh_base.html" %}
{% block extrahead %}
<script type="text/javascript" charset="utf-8">
	$(document).ready(function() {
		$('#user_table').dataTable(
            {
                "iDisplayLength": 50, 
                "sPaginationType": "full_numbers",
                "sDom": '<"clear">lfrtip',
		        "bServerSide": true, 
		        "sAjaxSource": "{% url snh.views.get_tw_list current_id %}",
            });
		$('#search_table').dataTable(
            {
                "iDisplayLength": 100, 
                "sPaginationType": "full_numbers",
                "sDom": '<"clear">lfrtip',
            });
	} );
</script>
{% endblock %}
{% block submenu %}
<table class="tableheader">
    <tr>
        <td {% if current_id == "0" %}class="submenu-selection"{% endif %}><a href="/tw/0">All harvesters</a></td>
        {% for h in all_harvesters %}
        <td  {% ifequal current_id h.pmk_id|slugify %}class="submenu-selection"{% endifequal %}><a href="/tw/{{ h.pmk_id }}">{{ h }}</a></td>
        {% endfor %}
    </tr>
</table>
{% endblock %}

{% block content %}
<h3>Twitter harvest - List of users</h3>
<table id="user_table" class="pretty" width="100%">
    <thead>
    <tr>
        <th>Name</th>
        <th>Screen Name</th>
        <th>Description</th>
        <th>Followers count</th>
        <th>Friends count</th>
        <th>Statuses count</th>
        <th>Listed count</th>
    </tr>
    </thead>
    <tbody>
{% for twuser in user_list %}
    <tr onclick="document.location.href='/twitter_detail/{{ twuser.screen_name }}/'">
        <td>{{ twuser.name }}</td>
        <td>{{ twuser.screen_name }}</td>
        <td>{{ twuser.description }}</td>
        <td class="center">{{ twuser.followers_count|default_if_none:"0" }}</td>
        <td class="center">{{ twuser.friends_count|default_if_none:"0" }}</td>
        <td class="center">{{ twuser.statuses_count|default_if_none:"0" }}</td>
        <td class="center">{{ twuser.listed_count|default_if_none:"0" }}</td>
    </tr>
{% endfor %}
    </tbody>
</table>
<h3>Twitter harvest - List of search tag</h3>
<table id="search_table" class="pretty" width="100%">
    <thead>
    <tr>
        <th>Term</th>
    </tr>
    </thead>
    <tbody>
{% for search in searches %}
    <tr onclick="document.location.href='/twitter_search_detail/{{ search.pmk_id }}/'">
        <td>{{ search.term }}</td>
    </tr>
{% endfor %}
    </tbody>
</table>
{% endblock %}
